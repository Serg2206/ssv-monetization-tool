# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API - SSV Monetization Tool

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫-api-—Å–µ—Ä–≤–µ—Ä–∞)
3. [API Endpoints](#api-endpoints)
4. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ssv-web-dashboard](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-ssv-web-dashboard)
5. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
6. [–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#–ø—Ä–∏–º–µ—Ä—ã-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

---

## –û–±–∑–æ—Ä

SSV Monetization Tool –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–µ–±-–ø–∞–Ω–µ–ª—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (ssv-web-dashboard) –∏ –¥—Ä—É–≥–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã SSVproff.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API:

- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª–∏—Ç–∏–∫–∞–º –ø–ª–∞—Ç—Ñ–æ—Ä–º (YouTube, Amazon KDP)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ –æ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd ssv-monetization-tool

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è API
pip install -r requirements-api.txt
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å–∫ –Ω–∞ localhost:8000
python api/app.py

# –ò–ª–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º uvicorn
uvicorn api.app:app --reload --host 0.0.0.0 --port 8000
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **Health check**: http://localhost:8000/health

---

## API Endpoints

### 1. –ö–æ—Ä–Ω–µ–≤–æ–π endpoint

**GET /**

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± API.

**Response:**

```json
{
  "name": "SSV Monetization Tool API",
  "version": "1.0.0",
  "status": "running",
  "docs": "/docs"
}
```

---

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**GET /health**

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ API —Å–µ—Ä–≤–µ—Ä–∞.

**Response:**

```json
{
  "status": "healthy",
  "config_loaded": true
}
```

---

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏

**POST /api/v1/monetize**

–ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—é –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É.

**Request Body:**

```json
{
  "content": {
    "id": "video_001",
    "title": "–¢–µ—Ö–Ω–∏–∫–∞ –ª–∞–ø–∞—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–æ–π —Ö–æ–ª–µ—Ü–∏—Å—Ç—ç–∫—Ç–æ–º–∏–∏",
    "description": "–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Ç–µ—Ö–Ω–∏–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏..."
  },
  "strategy": "masked",
  "methods": ["affiliate_links", "premium_content"]
}
```

**Response:**

```json
{
  "success": true,
  "result": {
    "id": "video_001",
    "title": "–¢–µ—Ö–Ω–∏–∫–∞ –ª–∞–ø–∞—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–æ–π —Ö–æ–ª–µ—Ü–∏—Å—Ç—ç–∫—Ç–æ–º–∏–∏",
    "description": "–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Ç–µ—Ö–Ω–∏–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏... (https://store.com/tools?ref=ssv&utm_source=youtube&utm_campaign=video_001)"
  },
  "metrics": {
    "description_length": 350,
    "affiliate_links_count": 2,
    "has_disclaimer": false,
    "has_cta": true
  },
  "compliance_warnings": null
}
```

**cURL Example:**

```bash
curl -X POST "http://localhost:8000/api/v1/monetize" \
  -H "Content-Type: application/json" \
  -d '{
    "content": {
      "id": "video_001",
      "title": "–¢–µ—Ö–Ω–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏",
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞..."
    },
    "strategy": "masked"
  }'
```

---

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è YouTube

**GET /api/v1/compliance/youtube**

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∞–º YouTube.

**Query Parameters:**
- `description` (string, required) ‚Äî —Ç–µ–∫—Å—Ç –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**Response:**

```json
{
  "compliant": false,
  "issues": [
    "Excessive caps detected",
    "Too many links (18), YouTube limit is 15"
  ]
}
```

**cURL Example:**

```bash
curl -X GET "http://localhost:8000/api/v1/compliance/youtube?description=–ö–£–ü–ò–¢–¨+–°–ï–ô–ß–ê–°!!!"
```

---

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è Amazon KDP

**GET /api/v1/compliance/amazon-kdp**

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∞–º Amazon KDP.

**Query Parameters:**
- `description` (string, required) ‚Äî —Ç–µ–∫—Å—Ç –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**Response:**

```json
{
  "compliant": true,
  "issues": []
}
```

---

### 6. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

**GET /api/v1/strategies**

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏.

**Response:**

```json
{
  "strategies": [
    {
      "name": "full",
      "display_name": "–ü–æ–ª–Ω–∞—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è",
      "description": "–í—Å–µ –º–µ—Ç–æ–¥—ã –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã —Å —è–≤–Ω—ã–º–∏ –¥–∏—Å–∫–ª–µ–π–º–µ—Ä–∞–º–∏"
    },
    {
      "name": "partial",
      "display_name": "–ß–∞—Å—Ç–∏—á–Ω–∞—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è",
      "description": "–í—ã–±–æ—Ä–æ—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏"
    },
    {
      "name": "masked",
      "display_name": "–ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è",
      "description": "–î–µ–ª–∏–∫–∞—Ç–Ω–∞—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –±–µ–∑ —è–≤–Ω—ã—Ö –¥–∏—Å–∫–ª–µ–π–º–µ—Ä–æ–≤"
    },
    {
      "name": "hidden",
      "display_name": "–°–∫—Ä—ã—Ç–∞—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è",
      "description": "–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞ UX"
    }
  ]
}
```

---

### 7. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏

**POST /api/v1/analytics/link**

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫—É—é —Å—Å—ã–ª–∫—É —Å UTM-–º–µ—Ç–∫–∞–º–∏.

**Request Body:**

```json
{
  "base_url": "https://amazon.com/product",
  "content_id": "video_001",
  "source": "youtube",
  "medium": "description"
}
```

**Response:**

```json
{
  "link": "https://amazon.com/product?utm_source=youtube&utm_medium=description&utm_campaign=video_001"
}
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ssv-web-dashboard

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
# –í —Ñ–∞–π–ª–µ ssv-web-dashboard/backend/monetization_integration.py

import sys
sys.path.append('../ssv-monetization-tool')

from client.monetization_client import MonetizationClient

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
monetization_client = MonetizationClient(base_url="http://localhost:8000")

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤–∏–¥–µ–æ
def create_video_with_monetization(video_data, strategy='masked'):
    """–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–µ–π."""
    
    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏
    result = monetization_client.monetize_content(
        content={
            'id': video_data['id'],
            'title': video_data['title'],
            'description': video_data['description']
        },
        strategy=strategy
    )
    
    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
    video_data['description'] = result['result']['description']
    video_data['metrics'] = result['metrics']
    
    return video_data
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã

```javascript
// –í —Ñ–∞–π–ª–µ ssv-web-dashboard/frontend/src/api/monetization.js

const MONETIZATION_API_URL = 'http://localhost:8000';

export async function monetizeContent(content, strategy = 'masked') {
  const response = await fetch(`${MONETIZATION_API_URL}/api/v1/monetize`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      content,
      strategy,
    }),
  });
  
  if (!response.ok) {
    throw new Error('Failed to monetize content');
  }
  
  return response.json();
}

export async function checkYouTubeCompliance(description) {
  const params = new URLSearchParams({ description });
  const response = await fetch(
    `${MONETIZATION_API_URL}/api/v1/compliance/youtube?${params}`
  );
  
  if (!response.ok) {
    throw new Error('Failed to check compliance');
  }
  
  return response.json();
}

export async function getStrategies() {
  const response = await fetch(`${MONETIZATION_API_URL}/api/v1/strategies`);
  
  if (!response.ok) {
    throw new Error('Failed to get strategies');
  }
  
  return response.json();
}
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

```jsx
// ssv-web-dashboard/frontend/src/components/VideoEditor.jsx

import React, { useState, useEffect } from 'react';
import { monetizeContent, getStrategies } from '../api/monetization';

function VideoEditor() {
  const [videoData, setVideoData] = useState({
    id: 'video_001',
    title: '',
    description: '',
  });
  const [strategies, setStrategies] = useState([]);
  const [selectedStrategy, setSelectedStrategy] = useState('masked');
  const [isMonetizing, setIsMonetizing] = useState(false);

  useEffect(() => {
    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    getStrategies().then((data) => setStrategies(data.strategies));
  }, []);

  const handleMonetize = async () => {
    setIsMonetizing(true);
    try {
      const result = await monetizeContent(videoData, selectedStrategy);
      setVideoData((prev) => ({
        ...prev,
        description: result.result.description,
      }));
      alert('–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
    } catch (error) {
      alert('–û—à–∏–±–∫–∞ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏: ' + error.message);
    } finally {
      setIsMonetizing(false);
    }
  };

  return (
    <div className="video-editor">
      <h2>–†–µ–¥–∞–∫—Ç–æ—Ä –≤–∏–¥–µ–æ</h2>
      
      <input
        type="text"
        placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫"
        value={videoData.title}
        onChange={(e) => setVideoData({ ...videoData, title: e.target.value })}
      />
      
      <textarea
        placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"
        value={videoData.description}
        onChange={(e) => setVideoData({ ...videoData, description: e.target.value })}
      />
      
      <select
        value={selectedStrategy}
        onChange={(e) => setSelectedStrategy(e.target.value)}
      >
        {strategies.map((strategy) => (
          <option key={strategy.name} value={strategy.name}>
            {strategy.display_name}
          </option>
        ))}
      </select>
      
      <button onClick={handleMonetize} disabled={isMonetizing}>
        {isMonetizing ? '–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ...' : '–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—é'}
      </button>
    </div>
  );
}

export default VideoEditor;
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –í –ø—Ä–æ–µ–∫—Ç–µ ssv-web-dashboard
cd backend
pip install -e ../ssv-monetization-tool
```

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from client.monetization_client import MonetizationClient

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
client = MonetizationClient(base_url="http://localhost:8000")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
health = client.health_check()
print(f"–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞: {health['status']}")

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏
content = {
    'id': 'video_001',
    'title': '–¢–µ—Ö–Ω–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏',
    'description': '–û–ø–∏—Å–∞–Ω–∏–µ...'
}

result = client.monetize_content(content, strategy='masked')
print(f"–û–ø–∏—Å–∞–Ω–∏–µ: {result['result']['description']}")
print(f"–ú–µ—Ç—Ä–∏–∫–∏: {result['metrics']}")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
compliance = client.check_youtube_compliance(result['result']['description'])
print(f"–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç YouTube: {compliance['compliant']}")

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏
link = client.generate_unique_link(
    base_url="https://amazon.com/product",
    content_id="video_001",
    source="youtube"
)
print(f"–£–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞: {link}")
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤–∏–¥–µ–æ

```python
# backend/views/video_views.py

from flask import Blueprint, request, jsonify
from client.monetization_client import MonetizationClient

video_bp = Blueprint('video', __name__)
monetization_client = MonetizationClient(base_url="http://localhost:8000")

@video_bp.route('/api/videos', methods=['POST'])
def create_video():
    """–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–µ–π."""
    data = request.json
    
    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏
    try:
        result = monetization_client.monetize_content(
            content={
                'id': data['id'],
                'title': data['title'],
                'description': data['description']
            },
            strategy=data.get('monetization_strategy', 'masked')
        )
        
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        video = Video(
            id=data['id'],
            title=data['title'],
            description=result['result']['description'],
            metrics=result['metrics']
        )
        db.session.add(video)
        db.session.commit()
        
        return jsonify({
            'success': True,
            'video': video.to_dict(),
            'monetization_metrics': result['metrics']
        })
    
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500
```

### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```javascript
// frontend/src/components/DescriptionEditor.jsx

import React, { useState, useEffect } from 'react';
import { checkYouTubeCompliance } from '../api/monetization';
import debounce from 'lodash/debounce';

function DescriptionEditor({ value, onChange }) {
  const [compliance, setCompliance] = useState(null);
  const [isChecking, setIsChecking] = useState(false);

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞
  const checkCompliance = debounce(async (description) => {
    if (!description) return;
    
    setIsChecking(true);
    try {
      const result = await checkYouTubeCompliance(description);
      setCompliance(result);
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:', error);
    } finally {
      setIsChecking(false);
    }
  }, 1000);

  useEffect(() => {
    checkCompliance(value);
  }, [value]);

  return (
    <div className="description-editor">
      <textarea
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ..."
      />
      
      {isChecking && <div className="checking">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>}
      
      {compliance && (
        <div className={`compliance ${compliance.compliant ? 'success' : 'warning'}`}>
          {compliance.compliant ? (
            <span>‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–∞–º YouTube</span>
          ) : (
            <div>
              <span>‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:</span>
              <ul>
                {compliance.issues.map((issue, index) => (
                  <li key={index}>{issue}</li>
                ))}
              </ul>
            </div>
          )}
        </div>
      )}
    </div>
  );
}

export default DescriptionEditor;
```

### –ü—Ä–∏–º–µ—Ä 3: –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```python
# backend/tasks/batch_monetization.py

from celery import shared_task
from client.monetization_client import MonetizationClient
from models import Video

monetization_client = MonetizationClient(base_url="http://localhost:8000")

@shared_task
def batch_monetize_videos(video_ids, strategy='masked'):
    """
    –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–µ–æ.
    
    Args:
        video_ids: –°–ø–∏—Å–æ–∫ ID –≤–∏–¥–µ–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
        strategy: –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏
    """
    results = []
    
    for video_id in video_ids:
        try:
            video = Video.query.get(video_id)
            if not video:
                continue
            
            # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏
            result = monetization_client.monetize_content(
                content={
                    'id': video.id,
                    'title': video.title,
                    'description': video.description
                },
                strategy=strategy
            )
            
            # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
            video.description = result['result']['description']
            video.monetization_metrics = result['metrics']
            db.session.commit()
            
            results.append({
                'video_id': video_id,
                'success': True,
                'metrics': result['metrics']
            })
        
        except Exception as e:
            results.append({
                'video_id': video_id,
                'success': False,
                'error': str(e)
            })
    
    return {
        'total': len(video_ids),
        'successful': len([r for r in results if r['success']]),
        'failed': len([r for r in results if not r['success']]),
        'results': results
    }
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](API.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](USAGE.md)
- [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞](EXAMPLES.md)
- [GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/Serg2206/ssv-monetization-tool)

---

**–ê–≤—Ç–æ—Ä:** –ü—Ä–æ—Ñ–µ—Å—Å–æ—Ä –°.–í. –°—É—à–∫–æ–≤  
**–ü—Ä–æ–µ–∫—Ç:** SSVproff-Ecosystem  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** MIT
